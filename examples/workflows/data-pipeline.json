{
  "name": "Data Processing Pipeline",
  "description": "Multi-stage data processing workflow with validation",
  "nodes": [
    {
      "id": "fetch-data",
      "type": "agent",
      "config": {
        "agentType": "data-processor",
        "operation": "fetch",
        "source": "https://api.example.com/data",
        "format": "json"
      }
    },
    {
      "id": "validate-data",
      "type": "condition",
      "config": {
        "condition": "context.variables.fetch_result && context.variables.fetch_result.valid === true",
        "description": "Ensure data is valid before processing"
      }
    },
    {
      "id": "transform-data",
      "type": "agent",
      "config": {
        "agentType": "data-processor",
        "operation": "transform",
        "transformations": [
          "normalize",
          "deduplicate",
          "enrich"
        ]
      }
    },
    {
      "id": "analyze-with-ai",
      "type": "ai-task",
      "config": {
        "prompt": "Analyze the processed data and identify key trends, anomalies, and insights. Provide actionable recommendations.",
        "model": "claude-3-sonnet",
        "maxTokens": 2000
      }
    },
    {
      "id": "generate-report",
      "type": "agent",
      "config": {
        "agentType": "code-generator",
        "language": "markdown",
        "specification": "Create a comprehensive markdown report with the analysis results, including charts and tables"
      }
    },
    {
      "id": "create-pull-request",
      "type": "github-action",
      "config": {
        "action": "create-pr",
        "title": "Data Analysis Report - {{date}}",
        "body": "Automated data analysis report generated by AI Agent Pipeline",
        "head": "analysis-{{timestamp}}",
        "base": "main",
        "labels": ["automated", "data-analysis", "report"]
      }
    }
  ],
  "edges": [
    { "from": "fetch-data", "to": "validate-data" },
    { "from": "validate-data", "to": "transform-data" },
    { "from": "transform-data", "to": "analyze-with-ai" },
    { "from": "analyze-with-ai", "to": "generate-report" },
    { "from": "generate-report", "to": "create-pull-request" }
  ]
}
